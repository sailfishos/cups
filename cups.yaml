Name: cups
Summary: Common Unix Printing System
Version: 1.4.4
Release: 5
Group: System/Daemons
License: GPLv2
URL: http://www.cups.org/
Sources:
    - http://ftp.easysw.com/pub/cups/%{version}/cups-%{version}-source.tar.bz2
# MeeGo: don't start cups on boot, for fastboot
#    - cups.init
    - cupsprinter.png
    - cups-libusb.rules
    - pstopdf
    - cups-lpd
    - cups.logrotate
    - ncp.backend
    - cups.cron
    - textonly.filter
    - textonly.ppd
    - cups-rpmlintrc
# Use xinetd to start cups in MeeGo, for fastboot
    - cups.xinetd
Patches:
    - cups-no-gzip-man.patch
    - cups-1.1.16-system-auth.patch
    - cups-multilib.patch
    - cups-serial.patch
    - cups-banners.patch
    - cups-serverbin-compat.patch
    - cups-no-export-ssllibs.patch
    - cups-direct-usb.patch
    - cups-lpr-help.patch
    - cups-peercred.patch
    - cups-pid.patch
    - cups-page-label.patch
    - cups-eggcups.patch
    - cups-getpass.patch
    - cups-driverd-timeout.patch
    - cups-strict-ppd-line-length.patch
    - cups-logrotate.patch
    - cups-usb-paperout.patch
    - cups-build.patch
    - cups-res_init.patch
    - cups-filter-debug.patch
    - cups-uri-compat.patch
    - cups-cups-get-classes.patch
    - cups-avahi.patch
    - cups-str3382.patch
    - cups-0755.patch
    - cups-EAI_AGAIN.patch
    - cups-snmp-quirks.patch
    - cups-hp-deviceid-oid.patch
    - cups-dnssd-deviceid.patch
    - cups-ricoh-deviceid-oid.patch
    - cups-texttops-rotate-page.patch
    - cups-str3608.patch
    - cups-str3518.patch
    - cups-CVE-2010-2941.patch
## MEEGO PATCHES, apply as last:
    - cups-xinetd.patch
Description: |
    The Common UNIX Printing System provides a portable printing layer for 
    UNIX速 operating systems. It has been developed by Easy Software Products 
    to promote a standard printing solution for all UNIX vendors and users. 
    CUPS provides the System V and Berkeley command-line interfaces.

Requires:
    - dbus >= 0.90
    - tmpwatch
    - poppler-utils
    - udev
    - acl
    - xinetd
PkgConfigBR:
    - dbus-1
    - libpng
    - gnutls
    - avahi-core
PkgBR:
    - pam-devel
    - pkgconfig
    - libacl-devel
    - make >= 3.80
    - libjpeg-devel
    - libtiff-devel
    - poppler-utils
    - gcc >= 4.0.1
Provides:
    - /usr/bin/lpq
    - /usr/bin/lpr
    - /usr/bin/lp
    - /usr/bin/cancel
    - /usr/bin/lprm
    - /usr/bin/lpstat
    - lpd = 3.8.15-4
    - lpr = 3.8.15-4
    - cupsddk = 1.2.3-7
    - cupsddk-drivers = 1.2.3-7
Obsoletes:
    - lpd <= 3.8.15-3
    - lpr <= 3.8.15-3
    - cupsddk < 1.2.3-7
    - cupsddk-drivers < 1.2.3-7
Configure: configure
ConfigOptions:
    - --with-docdir=%{_datadir}/%{name}/www
    - --enable-debug
    - --with-log-file-perm=0600
    - --enable-pie
    - --enable-relro
    - --with-pdftops=pdftops
    - --with-dbusdir=%{_sysconfdir}/dbus-1
    - --enable-avahi
    - --disable-threads
    - --enable-gnutls localedir=%{_datadir}/locale
Builder: none
SubPackages:
    - Name: libs
      Summary: Common Unix Printing System - libraries
      Group: System/Libraries
      License: LGPLv2
      AutoDepend: no
      Description: |
          The Common UNIX Printing System provides a portable printing layer for 
          UNIX速 operating systems. It has been developed by Easy Software Products 
          to promote a standard printing solution for all UNIX vendors and users. 
          CUPS provides the System V and Berkeley command-line interfaces. 
          The cups-libs package provides libraries used by applications to use CUPS
          natively, without needing the lp/lpr commands.

    - Name: lpd
      Summary: Common Unix Printing System - lpd emulation
      Group: System/Daemons
      Description: |
          The Common UNIX Printing System provides a portable printing layer for 
          UNIX速 operating systems. This is the package that provides standard 
          lpd emulation.
      Requires:
          - xinetd

    - Name: devel
      Summary: Common Unix Printing System - development environment
      Group: Development/Libraries
      License: LGPLv2
      Description: |
          The Common UNIX Printing System provides a portable printing layer for 
          UNIX速 operating systems. This is the development package for creating
          additional printer drivers, and other CUPS services.
      Requires:
          - gnutls-devel
          - krb5-devel
          - zlib-devel
      Provides:
          - cupsddk-devel = 1.2.3-7
      Obsoletes:
          - cupsddk-devel < 1.2.3-7

